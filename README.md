# Signal Protocol E2EE System with Agentic AI Test Suite

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0-blue.svg)](https://www.typescriptlang.org/)
[![Deno](https://img.shields.io/badge/Deno-1.46-black.svg)](https://deno.land/)
[![Docker](https://img.shields.io/badge/Docker-Ready-blue.svg)](https://www.docker.com/)

An implementation of the **Signal Protocol** with an **Agentic AI Test Suite** for system maintenance and diagnostics. This project demonstrates end-to-end encrypted messaging between AI agents and human operators, featuring comprehensive automated testing, real-time monitoring, and AI-powered diagnostics.

## Please Read [PROJECT_EXPLANATION_OVERVIEW](PROJECT_EXPLANATION_OVERVIEW.md)

![Alice Tests](alicetest.png)

## ğŸŒŸ Key Features

### Core Capabilities
- **ğŸ” End-to-End Encryption (E2EE)** - Signal Protocol implementation with Double Ratchet Algorithm
- **ğŸ¤– AI-Powered Diagnostics** - GPT-4o-mini powered system maintenance agent
- **ğŸ“Š Agentic Test Suite** - 15 comprehensive tests across Signal, E2EE, AI, and Web API categories
- **ğŸ’¬ Real-time Secure Chat** - E2EE messaging between Alice (user) and SysMaint AI
- **ğŸ“ˆ Live Monitoring** - Real-time test execution with progress tracking
- **ğŸ“‹ Test History & Analytics** - SQLite-backed test result storage with export capabilities
- **ğŸ” Anomaly Detection** - AI-driven system health monitoring and issue detection

![Alice Demo](alicedemo.png)

### Security Features
- **X3DH Key Agreement** - Extended Triple Diffie-Hellman for session establishment
- **Double Ratchet Algorithm** - Forward secrecy and future secrecy for message encryption
- **Curve25519 & Kyber** - Post-quantum cryptography with hybrid key exchange
- **AES-256-CBC + HMAC-SHA256** - Authenticated encryption with integrity verification
- **Signal Protocol Library** - Official `@signalapp/libsignal-client` implementation

![Alice Chat](alicechat.png)

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           HIGH-LEVEL ARCHITECTURE                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                  â”‚   CLIENT    â”‚
                                  â”‚   (Alice)   â”‚
                                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                    â”‚                    â”‚
                    â–¼                    â–¼                    â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   Web Browser   â”‚  â”‚   Test Suite    â”‚  â”‚     Chat UI     â”‚
          â”‚   (Next.js)     â”‚  â”‚   Dashboard     â”‚  â”‚   (E2EE)        â”‚
          â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚
          â”‚ â€¢ 15 Agentic    â”‚  â”‚ â€¢ Real-time     â”‚  â”‚ â€¢ Signal Proto  â”‚
          â”‚   Tests         â”‚  â”‚   Progress      â”‚  â”‚ â€¢ Send/Recv     â”‚
          â”‚ â€¢ Test History  â”‚  â”‚ â€¢ Export JSON   â”‚  â”‚ â€¢ AI Responses  â”‚
          â”‚ â€¢ AI Overview   â”‚  â”‚ â€¢ Notifications â”‚  â”‚ â€¢ E2EE Indic.   â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚                    â”‚                    â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚     HTTP API Layer       â”‚
                         â”‚    (Next.js Routes)      â”‚
                         â”‚                          â”‚
                         â”‚  /api/chat        /api/e2ee/send   â”‚
                         â”‚  /api/e2ee/pull   /api/test/*      â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                         â”‚                         â”‚
           â–¼                         â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SysMaint Agent    â”‚  â”‚   Signal Protocol   â”‚  â”‚   State Database    â”‚
â”‚   (AI Processor)    â”‚  â”‚   (E2EE Engine)     â”‚  â”‚   (SQLite)          â”‚
â”‚                     â”‚  â”‚                     â”‚  â”‚                     â”‚
â”‚ â€¢ GPT-4o-mini       â”‚  â”‚ â€¢ X3DH Handshake    â”‚  â”‚ â€¢ Test Results      â”‚
â”‚ â€¢ Tool Selection    â”‚  â”‚ â€¢ Double Ratchet    â”‚  â”‚ â€¢ Message History   â”‚
â”‚ â€¢ Diagnostics       â”‚  â”‚ â€¢ AES-256-CBC       â”‚  â”‚ â€¢ Session State     â”‚
â”‚ â€¢ Report Gen        â”‚  â”‚ â€¢ HMAC-SHA256       â”‚  â”‚ â€¢ Metrics           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                        â”‚                        â”‚
           â”‚                        â–¼                        â”‚
           â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
           â”‚           â”‚   Relay Server      â”‚               â”‚
           â”‚           â”‚   (WebSocket)       â”‚               â”‚
           â”‚           â”‚                     â”‚               â”‚
           â”‚           â”‚ â€¢ Message Routing   â”‚               â”‚
           â”‚           â”‚ â€¢ E2EE Envelopes    â”‚               â”‚
           â”‚           â”‚ â€¢ Presence Mgmt     â”‚               â”‚
           â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
           â”‚                      â”‚                          â”‚
           â–¼                      â–¼                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Deno Microservice                               â”‚
â”‚                         (Diagnostic Reports)                            â”‚
â”‚                                                                         â”‚
â”‚  â€¢ Scheduled Analysis (Deno.cron)                                       â”‚
â”‚  â€¢ LLM-Powered Report Generation                                        â”‚
â”‚  â€¢ Test Result Analysis                                                 â”‚
â”‚  â€¢ AI Recommendations                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” Signal Protocol Implementation

![Alice Dashboard](alicedashboard.png)

### Protocol Stack

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SIGNAL PROTOCOL STACK                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              APPLICATION LAYER                           â”‚    â”‚
â”‚  â”‚  â€¢ Messages, Attachments, Group Chats                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                              â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚           DOUBLE RATCHET ALGORITHM                     â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚      â”‚
â”‚  â”‚  â”‚ Root Key    â”‚â”€â”€â”€â–¶â”‚ Chain Keys  â”‚â”€â”€â”€â–¶â”‚ Message  â”‚  â”‚      â”‚
â”‚  â”‚  â”‚ Derivation  â”‚    â”‚ (Sending)   â”‚    â”‚ Keys     â”‚  â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚      â”‚
â”‚  â”‚                              â”‚                        â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚      â”‚
â”‚  â”‚  â”‚           DIFFIE-HELLMAN RATCHET                â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ New ephemeral keys per message               â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ Forward secrecy guarantee                    â”‚   â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                              â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚         X3DH KEY AGREEMENT (Initial Setup)             â”‚      â”‚
â”‚  â”‚                                                          â”‚      â”‚
â”‚  â”‚   Alice                          Bob                     â”‚      â”‚
â”‚  â”‚     â”‚                              â”‚                     â”‚      â”‚
â”‚  â”‚     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                     â”‚      â”‚
â”‚  â”‚     â”œâ”€â”€â”‚ Identity Key (IK_A)  â”‚â”€â”€â”€â”€â”¤                     â”‚      â”‚
â”‚  â”‚     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                     â”‚      â”‚
â”‚  â”‚     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                     â”‚      â”‚
â”‚  â”‚     â”œâ”€â”€â”‚ Signed PreKey (SPK)  â”‚â”€â”€â”€â”€â”¤                     â”‚      â”‚
â”‚  â”‚     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                     â”‚      â”‚
â”‚  â”‚     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                     â”‚      â”‚
â”‚  â”‚     â”œâ”€â”€â”‚ One-Time PreKey (OPK)â”‚â”€â”€â”€â”€â”¤                     â”‚      â”‚
â”‚  â”‚     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                     â”‚      â”‚
â”‚  â”‚     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                     â”‚      â”‚
â”‚  â”‚     â””â”€â”€â”‚ Kyber PreKey (PQ)    â”‚â”€â”€â”€â”€â”˜                     â”‚      â”‚
â”‚  â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚      â”‚
â”‚  â”‚                                                          â”‚      â”‚
â”‚  â”‚  DH1 = DH(IK_A, SPK_B)        DH2 = DH(EK_A, IK_B)      â”‚      â”‚
â”‚  â”‚  DH3 = DH(EK_A, SPK_B)        DH4 = DH(EK_A, OPK_B)     â”‚      â”‚
â”‚  â”‚                                                          â”‚      â”‚
â”‚  â”‚  SK = KDF(DH1 || DH2 || DH3 || DH4 || PQK)              â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                              â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚           CRYPTOGRAPHIC PRIMITIVES                     â”‚      â”‚
â”‚  â”‚                                                          â”‚      â”‚
â”‚  â”‚  â€¢ Curve25519 (Elliptic Curve)  - Key Exchange          â”‚      â”‚
â”‚  â”‚  â€¢ Kyber-768 (Post-Quantum)     - Quantum Resistance    â”‚      â”‚
â”‚  â”‚  â€¢ AES-256-CBC                  - Symmetric Encryption  â”‚      â”‚
â”‚  â”‚  â€¢ HMAC-SHA256                  - Message Integrity     â”‚      â”‚
â”‚  â”‚  â€¢ SHA-256                      - Hashing               â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### E2EE Message Flow

```
Alice (Web UI)                                    SysMaint AI Agent
      â”‚                                                   â”‚
      â”‚  1. COMPOSE MESSAGE                               â”‚
      â”‚     "Check system status"                         â”‚
      â”‚                                                   â”‚
      â”‚  2. ENCRYPT (Signal Protocol)                     â”‚
      â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
      â”‚     â”‚ â€¢ Get session with Bob      â”‚              â”‚
      â”‚     â”‚ â€¢ Advance sending chain     â”‚              â”‚
      â”‚     â”‚ â€¢ Derive message key (KDF)  â”‚              â”‚
      â”‚     â”‚ â€¢ AES-256-CBC encryption    â”‚              â”‚
      â”‚     â”‚ â€¢ HMAC-SHA256 authenticationâ”‚              â”‚
      â”‚     â”‚ â€¢ Base64 encode             â”‚              â”‚
      â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
      â”‚                                                   â”‚
      â”‚  3. SEND TO RELAY                                 â”‚
      â”‚     POST /api/e2ee/send                           â”‚
      â”‚     { encryptedMessage, to: "sysmaint" }          â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
      â”‚                                                   â”‚
      â”‚                        4. ROUTE TO RECIPIENT      â”‚
      â”‚                        (WebSocket/HTTP)           â”‚
      â”‚                                                   â”‚
      â”‚  5. NOTIFY ALICE                    6. PULL MESSAGES
      â”‚     "Message sent âœ“"               (Polling/WebSocket)
      â”‚                                                   â”‚
      â”‚                        7. DECRYPT                 â”‚
      â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
      â”‚                        â”‚ â€¢ Verify HMAC        â”‚   â”‚
      â”‚                        â”‚ â€¢ AES-256-CBC decryptâ”‚   â”‚
      â”‚                        â”‚ â€¢ Advance recv chain â”‚   â”‚
      â”‚                        â”‚ â€¢ Plaintext: "Check..â”‚   â”‚
      â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
      â”‚                                                   â”‚
      â”‚                        8. PROCESS WITH GPT-4o-miniâ”‚
      â”‚                        "System status: All OK"    â”‚
      â”‚                                                   â”‚
      â”‚  10. RECEIVE ENCRYPTED â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
      â”‚      { encryptedReply, from: "sysmaint" }         â”‚
      â”‚                                                   â”‚
      â”‚  11. DECRYPT & DISPLAY                            â”‚
      â”‚      ğŸ” E2EE Message: "System status: All OK"     â”‚
      â–¼                                                   â–¼
```

## ğŸ¤– Agentic AI Test Suite

### Test Categories

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     AGENTIC AI TEST SUITE ARCHITECTURE                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                   TEST ORCHESTRATOR                       â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚  â€¢ Sequential/Parallel Execution                   â”‚  â”‚
    â”‚  â”‚  â€¢ Retry Logic (up to 3 attempts)                  â”‚  â”‚
    â”‚  â”‚  â€¢ Progress Tracking via SSE                       â”‚  â”‚
    â”‚  â”‚  â€¢ Cost Calculation & Budget Monitoring            â”‚  â”‚
    â”‚  â”‚  â€¢ Result Persistence (SQLite)                     â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                    â”‚                    â”‚
    â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SIGNAL  â”‚    â”‚   E2EE   â”‚    â”‚    AI    â”‚    â”‚   WEB    â”‚
â”‚ PROTOCOL â”‚    â”‚  HEALTH  â”‚    â”‚  AGENT   â”‚    â”‚   API    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚1. ID Gen â”‚    â”‚5. Encryptâ”‚    â”‚9. Tool   â”‚    â”‚13. DB    â”‚
â”‚2. Prekeysâ”‚    â”‚6. PreKey â”‚    â”‚  Select  â”‚    â”‚   Query  â”‚
â”‚3. Sessionâ”‚    â”‚  Format  â”‚    â”‚10. Historyâ”‚   â”‚14. Chat  â”‚
â”‚4. Persistâ”‚    â”‚7. Ratchetâ”‚    â”‚11. Anomalyâ”‚   â”‚   API    â”‚
â”‚          â”‚    â”‚8. Tamper â”‚    â”‚12. Contextâ”‚   â”‚          â”‚
â”‚          â”‚    â”‚  Detect  â”‚    â”‚13. Multi â”‚    â”‚          â”‚
â”‚          â”‚    â”‚          â”‚    â”‚  Tool    â”‚    â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Test Details

#### Signal Protocol Tests (Tests 1-4)

| Test | Name | Description | Duration | Crypto |
|------|------|-------------|----------|--------|
| 1 | Signal Identity Generation | Generate Curve25519 identity key pair and registration ID | 300ms | Curve25519 |
| 2 | Prekey Bundle Generation | Generate signed prekeys, one-time prekeys, and post-quantum Kyber prekeys | 400ms | Ed25519, Kyber-768 |
| 3 | X3DH Session Establishment | Establish Signal session using Extended Triple Diffie-Hellman key agreement | 500ms | X3DH |
| 4 | Session Persistence | Verify sessions survive database close/reopen operations | 200ms | SQLite |

#### E2EE Health Tests (Tests 5-8)

| Test | Name | Description | Duration | Validation |
|------|------|-------------|----------|------------|
| 5 | E2EE Encryption/Decryption | Encrypt using AES-CBC + HMAC-SHA256, verify ciphertext differs from plaintext | 200ms | Roundtrip |
| 6 | PreKey Message Format | Verify first message uses PreKey format with correct fields (type 2 or 3) | 300ms | Format |
| 7 | Double Ratchet Advancement | Verify forward secrecy by sending 5 messages with unique encryption keys each time | 800ms | Forward Secrecy |
| 8 | Integrity Verification | Verify HMAC-SHA256 authentication detects tampered ciphertext and rejects decryption | 100ms | Integrity |

#### AI Agent Tests (Tests 9-13)

| Test | Name | Description | Duration | Cost |
|------|------|-------------|----------|------|
| 9 | AI Tool Selection | Verify AI correctly routes 'check status' queries to the status tool | 1200ms | $0.0003 |
| 10 | Historical Data Query | Verify AI queries historical metrics with correct time range parameters | 1500ms | $0.0004 |
| 11 | Anomaly Detection Query | Verify AI routes 'find problems' queries to the anomaly detection tool | 900ms | $0.0002 |
| 12 | Conversation Context | Verify AI maintains context across consecutive messages in same session | 1100ms | $0.0003 |
| 13 | Multi-Tool Reasoning | Verify AI chains status + history + anomaly tools for complex diagnostic queries | 2300ms | $0.0005 |

#### Web API Tests (Tests 14-15)

| Test | Name | Description | Duration | Component |
|------|------|-------------|----------|-----------|
| 14 | Database Query Operations | Test SQLite state database insert, query, and indexing operations | 100ms | SQLite |
| 15 | Chat API End-to-End | Test chat API with Signal Protocol encryption and OpenAI response | 500ms | Full Stack |

### Test Execution Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     TEST EXECUTION FLOW                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User clicks                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
"Run All Tests"                                â”‚  Test Dashboard    â”‚
     â”‚                                         â”‚  (Next.js UI)      â”‚
     â–¼                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  1. API Request  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚     POST /api/   â”‚
â”‚     test/run     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. EventSource Connection       â”‚
â”‚     (Server-Sent Events)         â”‚
â”‚                                  â”‚
â”‚     Client â—€â”€â”€â”€ data: {...}     â”‚
â”‚     Client â—€â”€â”€â”€ data: {...}     â”‚
â”‚     Client â—€â”€â”€â”€ data: {...}     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. Test Runner Initialization   â”‚
â”‚                                  â”‚
â”‚     â€¢ Create test context        â”‚
â”‚     â€¢ Initialize in-memory DB    â”‚
â”‚     â€¢ Set up Signal Protocol     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SEQUENTIAL TEST EXECUTION                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Test 1      â”‚â”€â”€â”€â–¶â”‚ Test 2      â”‚â”€â”€â”€â–¶â”‚ Test 3      â”‚â”€â”€â”€â–¶  â”‚
â”‚  â”‚ Signal ID   â”‚    â”‚ Prekeys     â”‚    â”‚ Session     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚        â”‚                  â”‚                  â”‚               â”‚
â”‚        â–¼                  â–¼                  â–¼               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚ Attempt 1â”‚       â”‚ Attempt 1â”‚       â”‚ Attempt 1â”‚        â”‚
â”‚   â”‚ (Success)â”‚       â”‚ (Success)â”‚       â”‚ (Success)â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ RETRY LOGIC (if needed)                               â”‚  â”‚
â”‚   â”‚                                                       â”‚  â”‚
â”‚   â”‚  Attempt 1 â”€â”€â–¶ Failed? â”€â”€â–¶ Wait 1s â”€â”€â–¶ Attempt 2     â”‚  â”‚
â”‚   â”‚     Failed? â”€â”€â–¶ Wait 2s â”€â”€â–¶ Attempt 3 (Final)        â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. Result Aggregation           â”‚
â”‚                                  â”‚
â”‚     â€¢ Calculate pass/fail rates  â”‚
â”‚     â€¢ Sum total costs            â”‚
â”‚     â€¢ Aggregate duration         â”‚
â”‚     â€¢ Store in SQLite            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. Browser Notification         â”‚
â”‚                                  â”‚
â”‚     âœ“ Test run completed!        â”‚
â”‚     15 passed, 0 failed          â”‚
â”‚     Total cost: $0.00025         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ’¬ Alice â†” SysMaint AI Chat Architecture

### Chat Message Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SECURE CHAT MESSAGE FLOW                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ALICE        â”‚                                â”‚   SYSMAINT AI    â”‚
â”‚   (Web Browser)  â”‚                                â”‚   (Agent)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                                  â”‚
         â”‚  STEP 1: COMPOSE & ENCRYPT                       â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
         â”‚  â”‚ User types: "Check system status"   â”‚         â”‚
         â”‚  â”‚                                     â”‚         â”‚
         â”‚  â”‚ Signal Protocol Operations:         â”‚         â”‚
         â”‚  â”‚ â€¢ Get session for "sysmaint"        â”‚         â”‚
         â”‚  â”‚ â€¢ Advance sending chain key         â”‚         â”‚
         â”‚  â”‚ â€¢ Derive message key (KDF)          â”‚         â”‚
         â”‚  â”‚ â€¢ AES-256-CBC encrypt               â”‚         â”‚
         â”‚  â”‚ â€¢ HMAC-SHA256 authenticate          â”‚         â”‚
         â”‚  â”‚ â€¢ Increment message counter         â”‚         â”‚
         â”‚  â”‚                                     â”‚         â”‚
         â”‚  â”‚ Output: EncryptedMessage {          â”‚         â”‚
         â”‚  â”‚   type: 3 (SignalMessage),          â”‚         â”‚
         â”‚  â”‚   body: "base64(ciphertext)",       â”‚         â”‚
         â”‚  â”‚   counter: N                        â”‚         â”‚
         â”‚  â”‚ }                                   â”‚         â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
         â”‚                                                  â”‚
         â”‚  POST /api/e2ee/send                             â”‚
         â”‚  { to: "sysmaint", message: encryptedMsg }       â”‚
         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
         â”‚                                                  â”‚
         â”‚                        STEP 2: RECEIVE & DECRYPT â”‚
         â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
         â”‚                        â”‚ â€¢ Verify HMAC         â”‚ â”‚
         â”‚                        â”‚ â€¢ AES-256-CBC decrypt â”‚ â”‚
         â”‚                        â”‚ â€¢ Advance recv chain  â”‚ â”‚
         â”‚                        â”‚ â€¢ Plaintext: "Check.. â”‚ â”‚
         â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
         â”‚                                                  â”‚
         â”‚                        STEP 3: AI PROCESSING     â”‚
         â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
         â”‚                        â”‚ GPT-4o-mini analysis  â”‚ â”‚
         â”‚                        â”‚ â€¢ Tool selection      â”‚ â”‚
         â”‚                        â”‚ â€¢ Status query        â”‚ â”‚
         â”‚                        â”‚ â€¢ Response generation â”‚ â”‚
         â”‚                        â”‚                       â”‚ â”‚
         â”‚                        â”‚ "System is healthy:   â”‚ â”‚
         â”‚                        â”‚  CPU: 15%, Memory: 60%â”‚ â”‚
         â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
         â”‚                                                  â”‚
         â”‚                        STEP 4: ENCRYPT RESPONSE  â”‚
         â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
         â”‚                        â”‚ Same E2EE process     â”‚ â”‚
         â”‚                        â”‚ â€¢ Encrypt response    â”‚ â”‚
         â”‚                        â”‚ â€¢ Update ratchet      â”‚ â”‚
         â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
         â”‚                                                  â”‚
         â”‚  Encrypted reply stored in database              â”‚
         â”‚  (Alice will poll/pull to receive)               â”‚
         â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
         â”‚                                                  â”‚
         â”‚  STEP 5: ALICE RECEIVES                          â”‚
         â”‚  GET /api/e2ee/pull                              â”‚
         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
         â”‚                                                  â”‚
         â”‚  { messages: [encryptedReply] }                  â”‚
         â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
         â”‚                                                  â”‚
         â”‚  STEP 6: DECRYPT & DISPLAY                       â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
         â”‚  â”‚ â€¢ Decrypt with Signal Protocol      â”‚         â”‚
         â”‚  â”‚ â€¢ Verify authenticity               â”‚         â”‚
         â”‚  â”‚ â€¢ Display with ğŸ” E2EE indicator    â”‚         â”‚
         â”‚  â”‚                                     â”‚         â”‚
         â”‚  â”‚ ğŸ¤– SysMaint: "System is healthy...  â”‚         â”‚
         â”‚  â”‚ ğŸ” E2EE verified                    â”‚         â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
         â”‚                                                  â”‚
```

### UI Components

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CHAT WINDOW UI LAYOUT                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’¬ Alice â†” SysMaint AI                              â— Encrypted      â”‚  â† Header
â”‚ ğŸ” E2EE Signal Protocol                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  ğŸ¤–                                                    ğŸ‘©              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚  â”‚ ğŸ” Welcome! I'm SysMaint AI.         â”‚                            â”‚
â”‚  â”‚ All messages are E2EE encrypted.     â”‚                            â”‚
â”‚  â”‚                                      â”‚                            â”‚
â”‚  â”‚ Click any test card to learn more!   â”‚                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                                    â”‚ What's test #5 about?       â”‚  â”‚
â”‚                                    â”‚ ğŸ”                           â”‚  â”‚
â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                      â”‚
â”‚  ğŸ¤–                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ” ğŸ“– E2EE Encryption/Decryption                             â”‚    â”‚
â”‚  â”‚                                                             â”‚    â”‚
â”‚  â”‚ Encrypt message using AES-CBC + HMAC-SHA256 and verify     â”‚    â”‚
â”‚  â”‚ ciphertext differs from plaintext.                         â”‚    â”‚
â”‚  â”‚                                                             â”‚    â”‚
â”‚  â”‚ â±ï¸ ~0.2s  ğŸ’° ~$0.0000                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                      â”‚  â† Messages Area
â”‚  ğŸ¤–                                                                  â”‚     (Scrollable)
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚  â”‚ â—â—â— (typing)          â”‚                                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â”‚                                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Ask about any test...                               â”‚     â¤     â”‚ â”‚  â† Input Area
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Dimensions:
- Desktop: 800px height, 640px messages area
- Mobile: 700px height, 540px messages area
```

## ğŸš€ Quick Start

### Prerequisites

- Docker and Docker Compose
- Node.js 20+ (for local development)
- Deno 1.46+ (for diagnostic microservice)
- OpenAI API key

### Installation

```bash
# Clone the repository
git clone <repository-url>
cd SignalProtocolSysMaintAgentv04Test01

# Set up environment variables
cp .env.example .env
# Edit .env and add your OPENAI_API_KEY

# Start all services
docker compose up -d

# Wait for services to initialize
sleep 10
```

### Accessing the Application

- **Web Dashboard**: http://localhost:3000
- **Test Suite**: http://localhost:3000/test
- **Relay Server**: http://localhost:8080
- **SysMaint Agent**: http://localhost:3001

### Running Tests

```bash
# Run all tests via API
curl -s http://localhost:3000/api/test/run

# Check test results
curl -s http://localhost:3000/api/test/history

# Export test results
curl -s "http://localhost:3000/api/test/export?runId=<runId>&format=structured"
```

## ğŸ“Š System Monitoring & Diagnostics

### Deno Diagnostic Microservice

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DENO DIAGNOSTIC MICROSERVICE                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Deno Runtime                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  HTTP Server (Port 8000)                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Endpoints:                                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ GET  /health          - Health check                  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ POST /analyze         - Analyze test runs             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ POST /report          - Generate diagnostic report    â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                                    â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Deno.cron Scheduler                                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Daily at 00:00 - Generate overnight report            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Hourly - Check system health                          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Weekly - Full system diagnostic                       â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### AI-Powered Analysis

The diagnostic microservice uses GPT-4o-mini to:

1. **Analyze Test Patterns**: Identify failing tests, trends, and correlations
2. **Generate Reports**: Natural language summaries of system health
3. **Recommend Actions**: AI-suggested fixes for detected issues
4. **Predict Issues**: Early warning system based on metric patterns

## ğŸ› ï¸ Development

### Project Structure

```
SignalProtocolSysMaintAgentv04Test01/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ sysmaint-web/          # Next.js web application
â”‚   â”‚   â”œâ”€â”€ app/               # App router pages
â”‚   â”‚   â”œâ”€â”€ lib/               # Utility libraries
â”‚   â”‚   â””â”€â”€ components/        # React components
â”‚   â”œâ”€â”€ sysmaint-agent/        # AI agent service
â”‚   â”œâ”€â”€ cli/                   # Command-line interface
â”‚   â””â”€â”€ diag-probe/            # Diagnostic probe
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ signal-core/           # Signal Protocol implementation
â”‚   â”œâ”€â”€ sysmaint-protocol/     # Protocol definitions
â”‚   â”œâ”€â”€ shared/                # Shared types and utilities
â”‚   â””â”€â”€ relay-server/          # Message relay server
â”œâ”€â”€ infra/
â”‚   â”œâ”€â”€ deno/                  # Deno microservices
â”‚   â””â”€â”€ diagnostics/           # Diagnostic tools
â””â”€â”€ docker-compose.yml         # Orchestration
```

### Adding New Tests

1. Define test in `apps/sysmaint-web/lib/test-suite/metadata.ts`
2. Implement test in `apps/sysmaint-web/lib/test-suite/signal-e2ee.ts` (or appropriate file)
3. Update test runner to include the new test
4. Rebuild and verify

### Environment Variables

```bash
# Required
OPENAI_API_KEY=sk-...

# Optional (with defaults)
RELAY_SERVER_URL=http://localhost:8080
SYSMAINT_AGENT_URL=http://localhost:3001
DATABASE_PATH=./data/state.db
DENO_SERVICE_URL=http://localhost:8000
```

## ğŸ”’ Security Considerations

### Key Management

- **Identity Keys**: Stored in SQLite with passphrase protection
- **Session Keys**: Ephemeral, rotated per-message via Double Ratchet
- **PreKeys**: One-time use, automatically replenished

### Threat Model

| Threat | Mitigation |
|--------|------------|
| Eavesdropping | E2EE with Signal Protocol |
| Man-in-the-Middle | X3DH with identity key verification |
| Quantum Computing | Kyber post-quantum key exchange |
| Replay Attacks | Message counters and timestamps |
| Forward Secrecy | Double Ratchet with ephemeral keys |

## ğŸ“ˆ Performance Metrics

### Test Suite Performance

- **Total Test Time**: ~10 seconds (all 15 tests)
- **Average Test Time**: 600ms
- **Success Rate**: 100% (with retry logic)
- **AI Cost per Run**: ~$0.00025

### Signal Protocol Performance

- **Key Generation**: ~50ms
- **Session Establishment**: ~100ms
- **Encryption**: ~5ms per message
- **Decryption**: ~5ms per message
- **Database Operations**: ~10ms

## ğŸ“„ License

This project is licensed under the MIT License - see [LICENSE](LICENSE) file for details.

## Acknowledgments

- **Signal Foundation**: For the Signal Protocol and libsignal-client
- **OpenAI**: For GPT-4o-mini API
- **Deno**: For the secure TypeScript runtime
- **Next.js Team**: For the React framework

**Built with ğŸ” encryption and ğŸ¤– AI for secure system maintenance.**
